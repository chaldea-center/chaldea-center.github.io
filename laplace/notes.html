<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Laplace Dev Notes | Chaldea</title>
    <meta name="description" content="Chaldea - Yet Another Planner & Battle Simulator for FGO">
    <meta name="generator" content="VitePress v1.0.0-rc.43">
    <link rel="preload stylesheet" href="/assets/style.C_V8ZGbU.css" as="style">
    
    <script type="module" src="/assets/app.D66hnGX3.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.-i2sbza6.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Cqj0y_BB.js">
    <link rel="modulepreload" href="/assets/laplace_notes.md.CfVMmKKT.lean.js">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="keywords" content="Chaldea,Chaldea Center,Chaldea App,Laplace,迦勒底,素材规划,Material Planning,Planner,模拟器,组队,Battle Simulator,3T Simulator,companion,FGO,fate,Fate/Grand Order,命运-冠位指定,型月,typemoon,周回,free">
    <script>var _url=new URL(window.location.href),_need_redirect=_url.hostname==="chaldea-center.github.io";_need_redirect&&(_url.hostname="docs.chaldea.center",window.location.href=_url.toString());</script>
    <script src="https://www.googletagmanager.com/gtag/js?id=G-PPD5M5TR2R" async></script>
    <script>if(!_need_redirect){let a=function(){dataLayer.push(arguments)};var gtag=a;window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-PPD5M5TR2R")}</script>
    <script>var _hmt=_hmt||[];(function(){if(!_need_redirect&&!_hmt.id){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?bb56c04bd266194546d3e8b96ba9d6c2";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),_hmt.push(["_requirePlugin","UrlChangeTracker",{shouldTrackUrlChange:function(e,r){return e=e.split(/[?#]/i)[0],r=r.split(/[?#]/i)[0],e!=r}}])}})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:site_name" content="Chaldea">
    <meta name="og:type" content="article">
    <meta name="og:title" content="Laplace Dev Notes | Chaldea">
    <meta name="og:image" content="https://docs.chaldea.center/logo.png">
    <meta name="og:url" content="https:/docs.chaldea.center/laplace/notes">
    <meta name="og:description" content="Table of Contents [[toc]] Switching Targets Selecting the next target For regular quests, the next target is determined based on on-field order. If QuestFlag.immediateEnemyDisappe...">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-df2edb17><!--[--><!--]--><!--[--><span tabindex="-1" data-v-98a330f9></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-98a330f9> Skip to content </a><!--]--><!----><header class="VPNav" data-v-df2edb17 data-v-a8068971><div class="VPNavBar has-sidebar" data-v-a8068971 data-v-91a3fb55><div class="wrapper" data-v-91a3fb55><div class="container" data-v-91a3fb55><div class="title" data-v-91a3fb55><div class="VPNavBarTitle has-sidebar" data-v-91a3fb55 data-v-de8f7aad><a class="title" href="/" data-v-de8f7aad><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-e4a091b1><!--]--><span data-v-de8f7aad>Chaldea</span><!--[--><!--]--></a></div></div><div class="content" data-v-91a3fb55><div class="content-body" data-v-91a3fb55><!--[--><!--]--><div class="VPNavBarSearch search" data-v-91a3fb55><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-91a3fb55 data-v-24819955><span id="main-nav-aria-label" class="visually-hidden" data-v-24819955>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/" tabindex="0" data-v-24819955 data-v-24a76258><!--[--><span data-v-24a76258>Chaldeas</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/laplace/" tabindex="0" data-v-24819955 data-v-24a76258><!--[--><span data-v-24a76258>Laplace</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/donation" tabindex="0" data-v-24819955 data-v-24a76258><!--[--><span data-v-24a76258>Donate</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://discord.gg/5M6w5faqjP" target="_blank" rel="noreferrer" tabindex="0" data-v-24819955 data-v-24a76258><!--[--><span data-v-24a76258>Discord</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-91a3fb55 data-v-ea143c3b data-v-e0dca368><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-e0dca368><span class="text" data-v-e0dca368><span class="vpi-languages option-icon" data-v-e0dca368></span><!----><span class="vpi-chevron-down text-icon" data-v-e0dca368></span></span></button><div class="menu" data-v-e0dca368><div class="VPMenu" data-v-e0dca368 data-v-163fae48><!----><!--[--><!--[--><div class="items" data-v-ea143c3b><p class="title" data-v-ea143c3b>English</p><!--[--><div class="VPMenuLink" data-v-ea143c3b data-v-ab458d63><a class="VPLink link" href="/zh/laplace/notes" data-v-ab458d63><!--[-->中文<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-91a3fb55 data-v-7e88c28b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-7e88c28b data-v-64130f2f data-v-b18ccc94><span class="check" data-v-b18ccc94><span class="icon" data-v-b18ccc94><!--[--><span class="vpi-sun sun" data-v-64130f2f></span><span class="vpi-moon moon" data-v-64130f2f></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-91a3fb55 data-v-ecaa7d85 data-v-916ab765><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chaldea-center/chaldea" aria-label="github" target="_blank" rel="noopener" data-v-916ab765 data-v-27a8b0f3><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-91a3fb55 data-v-501cb493 data-v-e0dca368><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e0dca368><span class="vpi-more-horizontal icon" data-v-e0dca368></span></button><div class="menu" data-v-e0dca368><div class="VPMenu" data-v-e0dca368 data-v-163fae48><!----><!--[--><!--[--><div class="group translations" data-v-501cb493><p class="trans-title" data-v-501cb493>English</p><!--[--><div class="VPMenuLink" data-v-501cb493 data-v-ab458d63><a class="VPLink link" href="/zh/laplace/notes" data-v-ab458d63><!--[-->中文<!--]--></a></div><!--]--></div><div class="group" data-v-501cb493><div class="item appearance" data-v-501cb493><p class="label" data-v-501cb493>Appearance</p><div class="appearance-action" data-v-501cb493><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-501cb493 data-v-64130f2f data-v-b18ccc94><span class="check" data-v-b18ccc94><span class="icon" data-v-b18ccc94><!--[--><span class="vpi-sun sun" data-v-64130f2f></span><span class="vpi-moon moon" data-v-64130f2f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-501cb493><div class="item social-links" data-v-501cb493><div class="VPSocialLinks social-links-list" data-v-501cb493 data-v-916ab765><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chaldea-center/chaldea" aria-label="github" target="_blank" rel="noopener" data-v-916ab765 data-v-27a8b0f3><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-91a3fb55 data-v-59928232><span class="container" data-v-59928232><span class="top" data-v-59928232></span><span class="middle" data-v-59928232></span><span class="bottom" data-v-59928232></span></span></button></div></div></div></div><div class="divider" data-v-91a3fb55><div class="divider-line" data-v-91a3fb55></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-df2edb17 data-v-13e60103><div class="container" data-v-13e60103><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-13e60103><span class="vpi-align-left menu-icon" data-v-13e60103></span><span class="menu-text" data-v-13e60103>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-13e60103 data-v-8a5c43d7><button data-v-8a5c43d7>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-df2edb17 data-v-235fe9cd><div class="curtain" data-v-235fe9cd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-235fe9cd><span class="visually-hidden" id="sidebar-aria-label" data-v-235fe9cd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-235fe9cd><section class="VPSidebarItem level-0 has-active" data-v-235fe9cd data-v-58748532><div class="item" role="button" tabindex="0" data-v-58748532><div class="indicator" data-v-58748532></div><h2 class="text" data-v-58748532>Laplace</h2><!----></div><div class="items" data-v-58748532><!--[--><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/" data-v-58748532><!--[--><p class="text" data-v-58748532>3T Simulator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/team" data-v-58748532><!--[--><p class="text" data-v-58748532>Team Setup</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/battle" data-v-58748532><!--[--><p class="text" data-v-58748532>Battle Simulation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/np_dmg_ranking" data-v-58748532><!--[--><p class="text" data-v-58748532>NP Damage Ranking</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/faq" data-v-58748532><!--[--><p class="text" data-v-58748532>FAQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/bugs" data-v-58748532><!--[--><p class="text" data-v-58748532>Bugs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-58748532 data-v-58748532><div class="item" data-v-58748532><div class="indicator" data-v-58748532></div><a class="VPLink link link" href="/laplace/notes" data-v-58748532><!--[--><p class="text" data-v-58748532>Dev Notes</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-df2edb17 data-v-937fb2a1><div class="VPDoc has-sidebar has-aside" data-v-937fb2a1 data-v-dce5d65b><!--[--><!--]--><div class="container" data-v-dce5d65b><div class="aside" data-v-dce5d65b><div class="aside-curtain" data-v-dce5d65b></div><div class="aside-container" data-v-dce5d65b><div class="aside-content" data-v-dce5d65b><div class="VPDocAside" data-v-dce5d65b data-v-8dc7d6ff><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-8dc7d6ff data-v-c9b82f72><div class="content" data-v-c9b82f72><div class="outline-marker" data-v-c9b82f72></div><div class="outline-title" role="heading" aria-level="2" data-v-c9b82f72>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-c9b82f72><span class="visually-hidden" id="doc-outline-aria-label" data-v-c9b82f72> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-c9b82f72 data-v-ca32974a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-8dc7d6ff></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-dce5d65b><div class="content-container" data-v-dce5d65b><!--[--><!--]--><main class="main" data-v-dce5d65b><div style="position:relative;" class="vp-doc _laplace_notes" data-v-dce5d65b><div><h1 id="laplace-dev-notes" tabindex="-1">Laplace Dev Notes <a class="header-anchor" href="#laplace-dev-notes" aria-label="Permalink to &quot;Laplace Dev Notes&quot;">​</a></h1><details class="details custom-block"><summary>Table of Contents</summary><nav class="table-of-contents"><ul><li><a href="#switching-targets">Switching Targets</a><ul><li><a href="#selecting-the-next-target">Selecting the next target</a></li><li><a href="#u-olga-marie-s-aoe-card">U-Olga Marie&#39;s AOE Card</a></li></ul></li><li><a href="#dot-damage-mechanism">DOT Damage Mechanism</a></li><li><a href="#overkill-bug-bug">Overkill Bug Bug</a></li><li><a href="#multiple-class-affinity-buffs">Multiple Class Affinity Buffs</a></li><li><a href="#multiple-np-card-type-change-buff">Multiple NP Card Type Change Buff</a></li><li><a href="#revenge-target">Revenge Target</a></li><li><a href="#aŋra-mainiiu-s-np">Aŋra Mainiiu&#39;s NP</a></li><li><a href="#about-hp-bars-related-scripts">About HP Bars related scripts</a></li></ul></nav></details><h2 id="switching-targets" tabindex="-1">Switching Targets <a class="header-anchor" href="#switching-targets" aria-label="Permalink to &quot;Switching Targets&quot;">​</a></h2><h3 id="selecting-the-next-target" tabindex="-1">Selecting the next target <a class="header-anchor" href="#selecting-the-next-target" aria-label="Permalink to &quot;Selecting the next target&quot;">​</a></h3><p>For regular quests, the next target is determined based on on-field order.</p><p>If <code>QuestFlag.immediateEnemyDisapper</code> is present, the next target is determined based on uniqueId.</p><h3 id="u-olga-marie-s-aoe-card" tabindex="-1">U-Olga Marie&#39;s AOE Card <a class="header-anchor" href="#u-olga-marie-s-aoe-card" aria-label="Permalink to &quot;U-Olga Marie&#39;s AOE Card&quot;">​</a></h3><p>NP Card or AOE Card (U-Olga Marie&#39;s Buster &amp; Extra) will force a target switch (resulting in death animation). This applies both before and after the card.</p><p>E.g. U-Olga Marie executing a BAQ Chain will result in target switch three times:</p><ol><li>After Buster, play death animation if any enemy death, switch targets</li><li>After Arts &amp; Quick but before Extra, play death animation and switch targets again</li><li>After Extra, switch the third time</li></ol><p>The takeaway is that this may affect U-Olga Marie&#39;s NP refund if the Buster card kills the enemy before Arts.</p><h2 id="dot-damage-mechanism" tabindex="-1">DOT Damage Mechanism <a class="header-anchor" href="#dot-damage-mechanism" aria-label="Permalink to &quot;DOT Damage Mechanism&quot;">​</a></h2><p>At the end of the turn, first record the current hp as <code>X</code>, then applies HOT, then DOT. If DOT would kill the servant (hp &lt;= 0), then:</p><ul><li>if there is enemy (including backup) available, applies normal DOT damage.</li><li>if all enemies (including backup) are eliminated, cap the DOT damage as <code>X - 1</code>, thus the servant would live.</li></ul><p>For example, suppose we have a setup where Babbage equiping a 1HP Guts CE then uses his skill 3 (300 DOT), followed by Van Gogh&#39;s skill 2 (100 DOT and 300 HOT) and Gong&#39;s NP (also Gong&#39;s skill 1 not taunting Babbage), then:</p><ul><li>if there is enemy (including backup) available, Babbage would end up with <code>1 + 300 - 400 = -99 HP</code> and die</li><li>if all enemies (including backup) are eliminated, Babbage would end up with <code>1 + 300 - 0 = 301 HP</code> and live (since DOT damage got capped at <code>X - 1</code> where <code>X = 1</code>)</li></ul><p>The takeaway is if you kill all enemies in the current wave you can help servants with lethal DOT to live one more turn.</p><h2 id="overkill-bug-bug" tabindex="-1">Overkill Bug Bug <a class="header-anchor" href="#overkill-bug-bug" aria-label="Permalink to &quot;Overkill Bug Bug&quot;">​</a></h2><p>Overkill bug refers to the bug that by doing enough damage in a single turn you can gain overkill NP (* 1.5) even if it&#39;s not actually an overkill (only applies to command cards). This got preserved as a feature.</p><p>Triggering enemy deathRattle or gutsFunction would reset accumulation damage thus disabling overkill bug.</p><h2 id="multiple-class-affinity-buffs" tabindex="-1">Multiple Class Affinity Buffs <a class="header-anchor" href="#multiple-class-affinity-buffs" aria-label="Permalink to &quot;Multiple Class Affinity Buffs&quot;">​</a></h2><p>E.g. if Reines NP (negates DEF disadvantage) and Kama skill 3 (advantage against Alter Ego) both applies, and somehow an enemy Alter Ego applies ATK advantage against Assassin, what would be the final affinity if this Alter Ego attacks Kama?</p><p>This depends on the order of Kama&#39;s skill 3 &amp; Reines&#39; NP.</p><ul><li>First, Defender&#39;s Class Affinity Buff would override that of the attacker</li><li><strong>Whichever gets applied first gets higher priority</strong>, so if Kama uses skill 3 first then the affinity would be 0.5, otherwise it would be 1</li></ul><h2 id="multiple-np-card-type-change-buff" tabindex="-1">Multiple NP Card Type Change Buff <a class="header-anchor" href="#multiple-np-card-type-change-buff" aria-label="Permalink to &quot;Multiple NP Card Type Change Buff&quot;">​</a></h2><p>The last chosen card type gets priority.</p><h2 id="revenge-target" tabindex="-1">Revenge Target <a class="header-anchor" href="#revenge-target" aria-label="Permalink to &quot;Revenge Target&quot;">​</a></h2><p>Related Buffs: selfturnendFunction (turn end), delayFunction (after X turns), gutsFunction, damageFunction (when defending), deadFunction. Each trigger skill finds its own target.</p><p>Damage type: Command Card, Np Card, HP loss, DOT, damageValue (script damage)</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Not entirely confirmed</p></div><p>Should be based on the following order:</p><ol><li><p>Selecting a revenge target</p><p>When the buffs above activates, will target the last entity that attacked the current servant (regardless whether that&#39;s an ally or not on field or already dead):</p><ul><li>Excludes self</li><li>If <code>DataVals.OpponentOnly</code> is specified, then will only target enemy</li></ul><p>If there is no valid revenge target, then select a random enemy. In Laplace, this means the selected enemy.</p></li><li><p>Selecting the actual target based on <code>func.funcTargetType</code></p><ul><li><code>enemy</code>: a single enemy, if a valid revenge target exists from the previous step, then select that target</li><li><code>enemyOneNoDamageNoAction</code>: same as above, except this one only activates when taking damage</li><li><code>enemyOther</code>/<code>enemyOtherFull</code>: targets all enemies excluding the revenge target (all enemies if revenge target is an ally)</li></ul></li></ol><h2 id="aŋra-mainiiu-s-np" tabindex="-1">Aŋra Mainiiu&#39;s NP <a class="header-anchor" href="#aŋra-mainiiu-s-np" aria-label="Permalink to &quot;Aŋra Mainiiu&#39;s NP&quot;">​</a></h2><p>Based on current testing result, Aŋra Mainiiu will record all damages after his NP, which will get canceled out by healing (negative damage).</p><p>Note that:</p><ul><li>the recorded damage would not be negative, thus having a minimum of 0.</li><li>servants have a minimum HP of 0, so if one has 500 HP and takes a billion damage, the recorded damage would be 500.</li><li>DOT, force instant death (Gong&#39;s NP), and damages done by self are not recorded.</li><li>HOT would cancel out recorded damage (however, right now there is no meaningful way to test this).</li><li>Guts count as heals, thus canceling out the recorded damage. However, the healing amount is <code>gutsHp - 1</code> (so a guts of 3000 HP counts as 2999 healing).</li></ul><p>Tips: most of the time you can just do the calculation by writing down Aŋra Mainiiu&#39;s HP at the start of the enemy turn. The recorded damage (not multiplying by NP&#39;s rate) is <code>Aŋra Mainiiu&#39;s HP at the start of enemy turn - Aŋra Mainiiu&#39;s HP at the end of enemy turn + number of times Guts applied</code>.</p><h2 id="about-hp-bars-related-scripts" tabindex="-1">About HP Bars related scripts <a class="header-anchor" href="#about-hp-bars-related-scripts" aria-label="Permalink to &quot;About HP Bars related scripts&quot;">​</a></h2><ul><li><code>EnemyScript.shiftPosition</code>: starting value of <code>shiftDeckIndex</code>, <strong>default to -1</strong>. When this value is set, enemy HP bars would get partially hidden based on the value. For example, if an enemy has five npcId in <code>EnemyScript.shift</code> (6 HP bars in total), if shiftPosition = 1. then two HP bars will be hidden, and only three extra HP bars will be shown.</li><li><code>EnemyScript.dispBreakDisp</code>: make the enemy to start with empty hp bars, default to 0.</li><li><code>FuncType.breakGaugeUp/Down</code>: Used to add / remove HP bars of enemy via scripted events. Note that if <code>DataVals.ChangeMaxBreakGauge</code> is set, then the final display would be a little different. For example if right now the hp bar is (3/5) and <code>DataVals.ChangeMaxBreakGauge</code> is set, then after <code>breakGaugeUp</code> it would arrive at (4/6) instead of (4/5).</li></ul><p>E.g.: <a href="https://apps.atlasacademy.io/db/JP/quest/94091502/1" target="_blank" rel="noreferrer">FSR Event Main Story 2-1 Ushi Gozen</a> base enemy npcId=100, EnemyScript:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;npcId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;script&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;shift&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">102</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">103</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">104</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;shiftPosition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dispBreakShift&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><table><thead><tr><th>idx</th><th><strong>Step</strong></th><th><strong>lowLimitShift</strong></th><th><strong>shiftDeckIndex</strong></th><th><strong>curNpcId</strong></th><th><strong>Bars</strong></th></tr></thead><tbody><tr><td>1</td><td>init</td><td>0</td><td>-1</td><td>100</td><td>◆◆◆◆<br>5/5</td></tr><tr><td>2</td><td>shiftPosition=2</td><td>0+(2+1)=3</td><td>-1+(2+1)=2</td><td>103</td><td>◆<br>2/2</td></tr><tr><td>3</td><td>dispBreakShift=1</td><td>3</td><td>2+1=3</td><td>104</td><td>◇<br>1/2</td></tr><tr><td>4</td><td>breakGaugeUp(2)<br>+ChangeMaxBreakGauge</td><td>3-2=1</td><td>3-2=1</td><td>102</td><td>◆◆◇<br>3/4</td></tr><tr><td>5</td><td>breakGaugeUp(1)</td><td>1</td><td>1-1=0</td><td>101</td><td>◆◆◆<br>4/4</td></tr></tbody></table><blockquote><p>Step 4 is Yui Shousetsu&#39;s Master skill. Step 5 is not actually in this quest, just here to demonstrate the effect when ChangeMaxBreakGauge is not set.</p></blockquote></div></div></main><footer class="VPDocFooter" data-v-dce5d65b data-v-30364995><!--[--><!--]--><div class="edit-info" data-v-30364995><div class="edit-link" data-v-30364995><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/chaldea-center/chaldea/edit/main/docs/laplace/notes.md" target="_blank" rel="noreferrer" data-v-30364995><!--[--><span class="vpi-square-pen edit-link-icon" data-v-30364995></span> Edit on GitHub<!--]--></a></div><div class="last-updated" data-v-30364995><p class="VPLastUpdated" data-v-30364995 data-v-2d568efb>Last Updated: <time datetime="2024-02-08T03:19:55.000Z" data-v-2d568efb></time></p></div></div><nav class="prev-next" data-v-30364995><div class="pager" data-v-30364995><a class="VPLink link pager-link prev" href="/laplace/bugs" data-v-30364995><!--[--><span class="desc" data-v-30364995>Previous page</span><span class="title" data-v-30364995>Bugs</span><!--]--></a></div><div class="pager" data-v-30364995><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-df2edb17 data-v-21edd2fb><div class="container" data-v-21edd2fb><p class="message" data-v-21edd2fb>Powered by <a href="https://vitepress.dev/" target="_blank">Vitepress</a></p><p class="copyright" data-v-21edd2fb>Copyright © 2021-present narumi | MIT License</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"zh_guide_import_https_quantumultx.md\":\"CRyokjM-\",\"guide_lostroom.md\":\"QNo5zfcd\",\"laplace_index.md\":\"BmwVO63_\",\"guide_import_https_charles.md\":\"BZF25lOs\",\"zh_guide_feedback.md\":\"DhWSqa0P\",\"zh_guide_fgo_apk.md\":\"DooTyxy5\",\"zh_guide_import_https_stream.md\":\"DPta4Ag-\",\"zh_guide_free_calculator.md\":\"BU8FodAQ\",\"zh_guide_import_https_transfer_data.md\":\"hRs_1U23\",\"zh_guide_freedom_order.md\":\"D7ku0fbm\",\"zh_guide_game_statistics.md\":\"DfZETrTx\",\"zh_guide_import_data.md\":\"BY2PEKxp\",\"zh_guide_tools.md\":\"BZqTJYdt\",\"zh_guide_items.md\":\"9akrtEvC\",\"zh_guide_index.md\":\"DmSQ5OkW\",\"zh_index.md\":\"BZY5T7ya\",\"zh_guide_translation.md\":\"BeEyeXt0\",\"zh_guide_import_https_authfile_login.md\":\"DzkGlFOe\",\"zh_laplace_battle.md\":\"DTWu9r5P\",\"zh_laplace_faq.md\":\"SpOwF7t7\",\"zh_laplace_index.md\":\"CLVMU5LC\",\"zh_laplace_notes.md\":\"HrbZTka5\",\"zh_guide_import_https_decoder.md\":\"BM3MqYqF\",\"zh_laplace_np_dmg_ranking.md\":\"5bh8blPD\",\"zh_laplace_team.md\":\"Bkmwb6vl\",\"zh_guide_lostroom.md\":\"CdKeNIlL\",\"guide_app_setting.md\":\"BJHfphEk\",\"zh_guide_master_mission.md\":\"BdiA33P4\",\"zh_laplace_bugs.md\":\"f_Uz0GfH\",\"zh_guide_privacy.md\":\"DBgVVBaM\",\"zh_guide_references.md\":\"BbKRyjxz\",\"zh_guide_servant_plan.md\":\"DyL5S0uz\",\"zh_guide_import_https_deep.md\":\"BgVg5O7K\",\"zh_guide_import_https_gacha_stat.md\":\"CqydbLEV\",\"zh_guide_search_filter.md\":\"CBc1EGvi\",\"zh_guide_sq_plan.md\":\"Fn251nE3\",\"zh_guide_import_https_httpcanary.md\":\"aUqpfuLK\",\"zh_guide_mooncell.md\":\"Bt95KsKV\",\"zh_guide_import_https_index.md\":\"D-_RdOK1\",\"guide_freedom_order.md\":\"DVb4fyNt\",\"zh_guide_import_https_mitmproxy.md\":\"Y4T-PuvS\",\"guide_donation.md\":\"Ce8O25OS\",\"zh_guide_privacy2.md\":\"BPEgADXj\",\"guide_tools.md\":\"5mVHSqls\",\"guide_import_data.md\":\"BTSjuo0i\",\"guide_import_https_authfile_login.md\":\"pyLn0LOZ\",\"guide_import_https_deep.md\":\"mbdovV72\",\"guide_import_https_gacha_stat.md\":\"DyHdP10J\",\"guide_import_https_mitmproxy.md\":\"CJGvXILQ\",\"guide_import_https_transfer_data.md\":\"BqFPliey\",\"guide_import_https_index.md\":\"DkAComeJ\",\"guide_install.md\":\"Bh2LrRoN\",\"guide_import_https_stream.md\":\"fvrAEwrl\",\"guide_index.md\":\"DjB0fTlr\",\"guide_import_https_httpcanary.md\":\"ThkEF_hk\",\"guide_items.md\":\"B1K42rNq\",\"guide_master_mission.md\":\"DaD2P2K_\",\"guide_privacy.md\":\"CbcrBvzD\",\"guide_privacy2.md\":\"Czo2qJLb\",\"guide_references.md\":\"Cd3E-SX-\",\"guide_search_filter.md\":\"D4bUduiX\",\"guide_sq_plan.md\":\"CLv54fNc\",\"guide_servant_plan.md\":\"DrXqvPWX\",\"index.md\":\"C5lGJ_dX\",\"laplace_battle.md\":\"60xPryIW\",\"guide_summon.md\":\"B3xWg_87\",\"zh_guide_donation.md\":\"OEnDwCLm\",\"laplace_bugs.md\":\"BaTTiWi5\",\"zh_guide_events.md\":\"-TWaF5SG\",\"zh_guide_faq.md\":\"BifmXZIo\",\"guide_feedback.md\":\"xvU8byRG\",\"guide_events.md\":\"BOFGdBUW\",\"guide_faq.md\":\"BnqHiKOm\",\"guide_fgo_apk.md\":\"wQPUc2tt\",\"guide_free_calculator.md\":\"BRl88HqU\",\"zh_guide_import_https_charles.md\":\"9zQImtM5\",\"zh_guide_install.md\":\"DE7rcdYO\",\"zh_guide_summon.md\":\"Cnnc9g5q\",\"laplace_faq.md\":\"CvIvDrOc\",\"laplace_notes.md\":\"CfVMmKKT\",\"guide_game_statistics.md\":\"eUJRzVKh\",\"laplace_team.md\":\"q90PivPO\",\"guide_translation.md\":\"BGMQuKk_\",\"laplace_np_dmg_ranking.md\":\"Cx4Jru5E\",\"guide_buff_filter.md\":\"DKV0ldtC\",\"zh_guide_app_setting.md\":\"irka71SZ\",\"zh_guide_buff_filter.md\":\"mBKB53fI\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Chaldea\",\"description\":\"Chaldea - Yet Another Planner & Battle Simulator for FGO\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"outline\":{\"level\":[2,3]},\"editLink\":{\"pattern\":\"https://github.com/chaldea-center/chaldea/edit/main/docs/:path\",\"text\":\"Edit on GitHub\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/chaldea-center/chaldea\"}],\"footer\":{\"message\":\"Powered by <a href=\\\"https://vitepress.dev/\\\" target=\\\"_blank\\\">Vitepress</a>\",\"copyright\":\"Copyright © 2021-present narumi | MIT License\"},\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"V0OM19W4NK\",\"apiKey\":\"997566b47d81157dd2edae04d90f099b\",\"indexName\":\"chaldea-center\",\"locales\":{\"zh\":{\"placeholder\":\"搜索\",\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"清除查询条件\",\"resetButtonAriaLabel\":\"清除查询条件\",\"cancelButtonText\":\"取消\",\"cancelButtonAriaLabel\":\"取消\"},\"startScreen\":{\"recentSearchesTitle\":\"搜索历史\",\"noRecentSearchesText\":\"没有搜索历史\",\"saveRecentSearchButtonTitle\":\"保存至搜索历史\",\"removeRecentSearchButtonTitle\":\"从搜索历史中移除\",\"favoriteSearchesTitle\":\"收藏\",\"removeFavoriteSearchButtonTitle\":\"从收藏中移除\"},\"errorScreen\":{\"titleText\":\"无法获取结果\",\"helpText\":\"你可能需要检查你的网络连接\"},\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\",\"searchByText\":\"搜索提供者\"},\"noResultsScreen\":{\"noResultsText\":\"无法找到相关结果\",\"suggestedQueryText\":\"你可以尝试查询\",\"reportMissingResultsText\":\"你认为该查询应该有结果？\",\"reportMissingResultsLinkText\":\"点击反馈\"}}}}}}}},\"locales\":{\"root\":{\"label\":\"English\",\"title\":\"Chaldea\",\"description\":\"Chaldea - Yet Another Planner & Battle Simulator for FGO\",\"themeConfig\":{\"nav\":[{\"text\":\"Chaldeas\",\"link\":\"/guide/\",\"activeMatch\":\"/guide/.*\"},{\"text\":\"Laplace\",\"link\":\"/laplace/\",\"activeMatch\":\"/laplace/.*\"},{\"text\":\"Donate\",\"link\":\"/guide/donation\"},{\"text\":\"Discord\",\"link\":\"https://discord.gg/5M6w5faqjP\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"Chaldea\",\"base\":\"/guide/\",\"items\":[{\"text\":\"About Chaldea\",\"link\":\"/\"},{\"text\":\"Help Translation\",\"link\":\"translation\"},{\"text\":\"Donation\",\"link\":\"donation\"},{\"text\":\"Install\",\"link\":\"install\"},{\"text\":\"FGO APK\",\"link\":\"fgo_apk\"},{\"text\":\"Feedback\",\"link\":\"feedback\"},{\"text\":\"FAQ\",\"link\":\"faq\"}]},{\"text\":\"Manual\",\"base\":\"/guide/\",\"items\":[{\"text\":\"Import Data\",\"link\":\"import_data\"},{\"text\":\"Import HTTPS Response\",\"collapsed\":true,\"base\":\"/guide/import_https/\",\"items\":[{\"text\":\"About HTTPS Sniffing\",\"link\":\"/\"},{\"text\":\"Login via Transfer File (JP/NA)\",\"link\":\"authfile_login\"},{\"text\":\"Stream-iOS\",\"link\":\"stream\"},{\"text\":\"mitmproxy\",\"link\":\"mitmproxy\"},{\"text\":\"Charles\",\"link\":\"charles\"},{\"text\":\"HttpCanary-Android\",\"link\":\"httpcanary\"},{\"text\":\"Transfer Data\",\"link\":\"transfer_data\"},{\"text\":\"Gacha Statistics\",\"link\":\"gacha_stat\"}]},{\"text\":\"Servant Planning\",\"link\":\"servant_plan\"},{\"text\":\"Event Planning\",\"link\":\"events\"},{\"text\":\"Items\",\"link\":\"items\"},{\"text\":\"Free Quest Solver\",\"link\":\"free_calculator\"},{\"text\":\"SQ Planning\",\"link\":\"sq_plan\"},{\"text\":\"Master Mission\",\"link\":\"master_mission\"},{\"text\":\"Summon/Gacha\",\"link\":\"summon\"},{\"text\":\"Statistics\",\"link\":\"game_statistics\"},{\"text\":\"Buff Filter\",\"link\":\"buff_filter\"},{\"text\":\"Search and Filters\",\"link\":\"search_filter\"},{\"text\":\"App Settings\",\"link\":\"app_setting\"},{\"text\":\"Fate/Freedom Order\",\"link\":\"freedom_order\"},{\"text\":\"LOSTROOM\",\"link\":\"lostroom\"}]},{\"text\":\"Misc\",\"base\":\"/guide/\",\"items\":[{\"text\":\"Tools\",\"link\":\"tools\"},{\"text\":\"References\",\"link\":\"references\"},{\"text\":\"Privacy\",\"link\":\"privacy2\"},{\"text\":\"Privacy Policy\",\"link\":\"privacy\"}]}],\"/laplace/\":[{\"text\":\"Laplace\",\"base\":\"/laplace/\",\"items\":[{\"text\":\"3T Simulator\",\"link\":\"/\"},{\"text\":\"Team Setup\",\"link\":\"team\"},{\"text\":\"Battle Simulation\",\"link\":\"battle\"},{\"text\":\"NP Damage Ranking\",\"link\":\"np_dmg_ranking\"},{\"text\":\"FAQ\",\"link\":\"faq\"},{\"text\":\"Bugs\",\"link\":\"bugs\"},{\"text\":\"Dev Notes\",\"link\":\"notes\"}]}]},\"lastUpdated\":{\"text\":\"Last Updated\",\"formatOptions\":{\"dateStyle\":\"long\"}}}},\"zh\":{\"label\":\"中文\",\"lang\":\"zh-CN\",\"link\":\"/zh/\",\"title\":\"Chaldea\",\"description\":\"Chaldea - FGO素材规划＆战斗模拟\",\"themeConfig\":{\"nav\":[{\"text\":\"Chaldeas\",\"link\":\"/zh/guide/\",\"activeMatch\":\"/zh/guide/.*\"},{\"text\":\"Laplace\",\"link\":\"/zh/laplace/\",\"activeMatch\":\"/zh/laplace/.*\"},{\"text\":\"支持我们\",\"link\":\"/zh/guide/donation\"},{\"text\":\"Discord\",\"link\":\"https://discord.gg/5M6w5faqjP\"}],\"sidebar\":{\"/zh/guide/\":[{\"text\":\"Chaldea\",\"base\":\"/zh/guide/\",\"items\":[{\"text\":\"关于Chaldea\",\"link\":\"/\"},{\"text\":\"贡献翻译\",\"link\":\"translation\"},{\"text\":\"支持与捐赠\",\"link\":\"donation\"},{\"text\":\"下载与安装\",\"link\":\"install\"},{\"text\":\"FGO APK\",\"link\":\"fgo_apk\"},{\"text\":\"反馈与建议\",\"link\":\"feedback\"},{\"text\":\"FAQ\",\"link\":\"faq\"}]},{\"text\":\"使用指南\",\"base\":\"/zh/guide/\",\"items\":[{\"text\":\"导入数据\",\"link\":\"import_data\"},{\"text\":\"导入抓包\",\"collapsed\":true,\"base\":\"/zh/guide/import_https/\",\"items\":[{\"text\":\"抓包简介\",\"link\":\"/\"},{\"text\":\"模拟登陆(JP/NA)\",\"link\":\"authfile_login\"},{\"text\":\"Stream-iOS\",\"link\":\"stream\"},{\"text\":\"mitmproxy\",\"link\":\"mitmproxy\"},{\"text\":\"Charles\",\"link\":\"charles\"},{\"text\":\"HttpCanary-Android\",\"link\":\"httpcanary\"},{\"text\":\"Quantumult X\",\"link\":\"quantumultx\"},{\"text\":\"解码小工具\",\"link\":\"decoder\"},{\"text\":\"迁移数据\",\"link\":\"transfer_data\"},{\"text\":\"抽卡统计\",\"link\":\"gacha_stat\"}]},{\"text\":\"从者练度规划\",\"link\":\"servant_plan\"},{\"text\":\"活动规划\",\"link\":\"events\"},{\"text\":\"素材\",\"link\":\"items\"},{\"text\":\"Free本规划\",\"link\":\"free_calculator\"},{\"text\":\"攒石规划\",\"link\":\"sq_plan\"},{\"text\":\"御主任务\",\"link\":\"master_mission\"},{\"text\":\"卡池\",\"link\":\"summon\"},{\"text\":\"统计\",\"link\":\"game_statistics\"},{\"text\":\"效果检索\",\"link\":\"buff_filter\"},{\"text\":\"搜索与筛选\",\"link\":\"search_filter\"},{\"text\":\"应用设置\",\"link\":\"app_setting\"},{\"text\":\"Fate/Freedom Order\",\"link\":\"freedom_order\"},{\"text\":\"Mooncell\",\"link\":\"mooncell\"},{\"text\":\"LOSTROOM\",\"link\":\"lostroom\"}]},{\"text\":\"其他\",\"base\":\"/zh/guide/\",\"items\":[{\"text\":\"工具\",\"link\":\"tools\"},{\"text\":\"参考资料\",\"link\":\"references\"},{\"text\":\"隐私策略\",\"link\":\"privacy2\"},{\"text\":\"Privacy Policy\",\"link\":\"privacy\"}]}],\"/zh/laplace/\":[{\"text\":\"Laplace\",\"base\":\"/zh/laplace/\",\"items\":[{\"text\":\"3T模拟器\",\"link\":\"/\"},{\"text\":\"编队配置\",\"link\":\"team\"},{\"text\":\"战斗模拟\",\"link\":\"battle\"},{\"text\":\"宝具伤害排行\",\"link\":\"np_dmg_ranking\"},{\"text\":\"常见问题\",\"link\":\"faq\"},{\"text\":\"Bugs\",\"link\":\"bugs\"},{\"text\":\"开发笔记\",\"link\":\"notes\"}]}]},\"darkModeSwitchLabel\":\"深色模式\",\"returnToTopLabel\":\"返回顶部\",\"langMenuLabel\":\"切换语言\",\"sidebarMenuLabel\":\"目录\",\"outline\":{\"level\":[2,3],\"label\":\"本页内容\"},\"lastUpdated\":{\"text\":\"更新时间\",\"formatOptions\":{\"dateStyle\":\"long\",\"forceLocale\":true}},\"notFound\":{\"linkLabel\":\"返回首页\",\"linkText\":\"返回首页\",\"title\":\"灵子转移失败\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"}}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>