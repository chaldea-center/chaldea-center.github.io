import{d as y,_ as v,o as r,c as l,m as t,F as m,G as _,a as w,t as o,e as u,aj as b,ak as N}from"./framework.-i2sbza6.js";const z=y({props:{language:String},data(){var e;return{loading:!1,msg:"",files:[],region:"jp",all_pkgs:{jp:"com.aniplex.fategrandorder",na:"com.aniplex.fategrandorder.en",tw:"com.xiaomeng.fategrandorder",kr:"com.netmarble.fgok"},t:(e=this.language)!=null&&e.startsWith("zh")?{version:"版本",link:"链接",download:"下载",size:"大小",modified:"修改时间",proxy:"代理"}:{version:"Version",link:"Link",download:"Download",size:"Size",modified:"Modified",proxy:"Proxy"}}},mounted(){this.getData()},methods:{filter(e){const s=this.all_pkgs[e];let a=[...this.files];return a=a.filter(d=>d.name.startsWith(s+".v")),a.sort((d,h)=>h.version!=d.version?h.version-d.version:h.versionName.localeCompare(h.versionName)),a=a.slice(0,10),a},getData(){this.loading=!0;const e=window.apk_files||[];if(e&&e.length>0){this.loading=!1,this.files=new Array(...e),this.msg="";return}fetch("https://fgo.bigcereal.com/apk/").then(s=>s.text()).then(s=>{let a=[];const c=new DOMParser().parseFromString(s,"text/html").getElementsByClassName("file");for(const n of c){if(n.childElementCount<5)continue;const i=n.children[1].getElementsByTagName("a")[0].getAttribute("href"),f=n.children[2].getAttribute("data-size"),k=n.children[3].getElementsByTagName("time")[0].getAttribute("datetime");if(!i||!i.endsWith(".apk"))continue;const g=i.split("/").at(-1)||i,p=g.match(/v(\d+)\.(\d+)\.(\d+)(\..+)?(?=\.apk)/);a.push({href:i,name:g,version:p==null?0:(parseInt(p[1])*100+parseInt(p[2]))*100+parseInt(p[3]),versionName:p==null?"":p[0].replace(".armeabi_v7a"," @32").substring(1),size:f==null?0:parseFloat(f),modified:k==null?null:new Date(k),link:"https://fgo.bigcereal.com/apk/"+g,link_proxy:"https://worker-cn.chaldea.center/proxy/apk/"+g})}this.files=a,window.apk_files=new Array(...a),this.loading=!1,this.msg=""}).catch(s=>{this.loading=!1,this.msg=s})}}}),A={class:"apk-release"},B={class:"toggle"},D=["id","value"],C=["for"],E=["href"],F={key:0},S={key:1,class:"error-hint"},V={key:2},j={style:{"text-wrap":"nowrap"}},L=["href"],M=["href"];function $(e,s,a,d,h,c){return r(),l("div",A,[t("div",B,[(r(),l(m,null,_(["jp","na","tw","kr"],n=>(r(),l(m,{key:n},[b(t("input",{type:"radio",id:n,value:n,"onUpdate:modelValue":s[0]||(s[0]=i=>e.region=i)},null,8,D),[[N,e.region]]),t("label",{for:n},o(n.toUpperCase()),9,C)],64))),64))]),t("div",null,[w(" Google Play: "),t("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id="+e.all_pkgs[e.region]},o(e.all_pkgs[e.region]),9,E)]),e.loading?(r(),l("p",F,"Loading...")):u("",!0),e.msg?(r(),l("p",S,"Error: "+o(e.msg),1)):u("",!0),e.files.length?(r(),l("table",V,[t("thead",null,[t("tr",j,[t("th",null,o(e.t.version),1),t("th",null,o(e.t.link),1),t("th",null,o(e.t.link),1),t("th",null,o(e.t.size),1),t("th",null,o(e.t.modified),1)])]),t("tbody",null,[(r(!0),l(m,null,_(e.filter(e.region),n=>(r(),l("tr",{key:n.name},[t("td",null,o(n.versionName),1),t("td",null,[t("a",{href:n.link,target:"_blank",rel:"noreferrer"},o(e.t.download),9,L)]),t("td",null,[t("a",{href:n.link_proxy,target:"_blank",rel:"noreferrer"},o(e.t.proxy),9,M)]),t("td",null,o((n.size/1024/1024).toFixed(0))+" MB",1),t("td",null,o(n.modified==null?"?":n.modified.toLocaleString()),1)]))),128))])])):u("",!0)])}const P=v(z,[["render",$]]);export{P as A};
