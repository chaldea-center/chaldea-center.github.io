import{d as _,_ as g,o as a,c as r,e as h,t as l,F as i,G as c,m as s,a as m}from"./framework.-i2sbza6.js";const u=_({props:{lang:String},data(){return{loading:!1,msg:"",all_releases:[],releases:[]}},created(){this.filter()},mounted(){this.getData()},methods:{filter(){console.log(this.all_releases.length);let e=this.all_releases.filter(t=>!t.prerelease&&t.tag_name.startsWith("v2")||t.tag_name=="beta");e=e.sort((t,d)=>new Date(d.created_at).getTime()-new Date(t.created_at).getTime()),this.releases=e.slice(0,10)},getData(){this.loading=!0;const e=window.github_releases||[];if(e&&e.length>0){this.loading=!1,this.all_releases=new Array(...e),this.msg="",this.filter();return}fetch(this.proxy("https://api.github.com/repos/chaldea-center/chaldea/releases")).then(t=>t.json()).then(t=>{this.loading=!1,this.all_releases=t,window.github_releases=new Array(...t),this.msg="",this.filter()}).catch(t=>{this.loading=!1,this.msg=t})},proxy(e){return e.startsWith("http")&&(e=e.split("://",2)[1]),"https://worker-cn.chaldea.center/proxy/github/"+e}}}),p={key:0},f={key:1,style:{color:"red"}},y=["id"],w=["href"],b={class:"details custom-block"},k={style:{font:"var(--font-family)"}},x={key:0},D={style:{"text-wrap":"nowrap"}},W=["href"],A={style:{"text-wrap":"nowrap"}},E=["href"],N=s("hr",null,null,-1);function $(e,t,d,v,B,L){return a(),r("div",null,[e.loading?(a(),r("p",p,"Loading...")):h("",!0),e.msg?(a(),r("p",f,"Error: "+l(e.msg),1)):h("",!0),(a(!0),r(i,null,c(e.releases,n=>(a(),r(i,{key:n.id},[s("h3",{id:n.name,tabindex:"-1"},[s("a",{class:"header-anchor",href:"#"+n.name,"aria-hidden":"true"},null,8,w),m(l(n.tag_name),1)],8,y),s("details",b,[s("summary",null," Release Note ("+l(new Date(n.created_at).toLocaleDateString())+") ",1),s("pre",k,l(n.body.trim()),1)]),s("table",null,[s("tbody",null,[(a(!0),r(i,null,c(n.assets,o=>(a(),r(i,{key:o.id},[!o.name.endsWith(".txt")&&!o.name.endsWith(".aab")&&!o.name.endsWith(".sha1")?(a(),r("tr",x,[s("td",null,l(o.name),1),s("td",D,[s("a",{href:o.browser_download_url,target:"_blank",rel:"noreferrer"},"Github",8,W)]),s("td",A,[s("a",{href:e.proxy(o.browser_download_url),target:"_blank",rel:"noreferrer"},l(e.lang=="zh"?"代理":"Proxy"),9,E)])])):h("",!0)],64))),128))])])],64))),128)),N])}const T=g(u,[["render",$]]);export{T as A};
